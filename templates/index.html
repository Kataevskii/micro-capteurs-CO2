<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Température & Humidité - DHT22</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; padding-top: 50px; background: #f0f8ff; }
  h1 { color: #333; }
  .data { font-size: 2em; margin: 20px; }
</style>
</head>
<body>
  <h1>Température & Humidité en live</h1>
  <div class="data" id="temperature">Température : -- °C</div>
  <div class="data" id="humidity">Humidité : -- %</div>

<script>
function fetchData() {
  fetch('/data')
    .then(response => response.json())
    .then(data => {
      if(data.temperature !== null && data.humidity !== null) {
        document.getElementById('temperature').textContent = `Température : ${data.temperature.toFixed(1)} °C`;
        document.getElementById('humidity').textContent = `Humidité : ${data.humidity.toFixed(1)} %`;
      } else {
        document.getElementById('temperature').textContent = 'Erreur de lecture';
                document.getElementById('humidity').textContent = '';
      }
    })
    .catch(() => {
      document.getElementById('temperature').textContent = 'Erreur de connexion';
      document.getElementById('humidity').textContent = '';
    });
}

// Actualiser toutes les 2 secondes
setInterval(fetchData, 2000);
fetchData();  // première lecture au chargement
</script>
</body>
</html>